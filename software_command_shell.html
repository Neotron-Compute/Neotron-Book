<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Neotron Command Shell - Neotron - The Embedded Rust Home Computer Platform</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> What is Neotron?</a></li><li class="chapter-item expanded "><a href="licence.html"><strong aria-hidden="true">2.</strong> Licence</a></li><li class="chapter-item expanded "><a href="credits.html"><strong aria-hidden="true">3.</strong> Credits</a></li><li class="chapter-item expanded affix "><li class="part-title">The Software</li><li class="chapter-item expanded "><a href="software.html"><strong aria-hidden="true">4.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="software_bios.html"><strong aria-hidden="true">5.</strong> The Neotron BIOS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="software_bios_apicalls.html"><strong aria-hidden="true">5.1.</strong> API Calls</a></li></ol></li><li class="chapter-item expanded "><a href="software_os.html"><strong aria-hidden="true">6.</strong> The Neotron OS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="software_os_apicalls.html"><strong aria-hidden="true">6.1.</strong> API Calls</a></li></ol></li><li class="chapter-item expanded "><a href="software_command_shell.html" class="active"><strong aria-hidden="true">7.</strong> The Neotron Command Shell</a></li><li class="chapter-item expanded "><a href="software_menu_shell.html"><strong aria-hidden="true">8.</strong> The Neotron Command Menu</a></li><li class="chapter-item expanded "><a href="software_applications.html"><strong aria-hidden="true">9.</strong> Neotron Applications</a></li><li class="chapter-item expanded affix "><li class="part-title">The Hardware</li><li class="chapter-item expanded "><a href="hardware.html"><strong aria-hidden="true">10.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="hardware_soc.html"><strong aria-hidden="true">11.</strong> The System On Chip</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="hardware_soc_video.html"><strong aria-hidden="true">11.1.</strong> Video</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> Audio</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.3.</strong> GPIO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.4.</strong> SPI Bus</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.5.</strong> IÂ²C Bus</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.6.</strong> UART/MIDI</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.7.</strong> RTC</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.8.</strong> SD Card</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.9.</strong> USB</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.</strong> Expanding the System</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">12.1.</strong> Video</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.2.</strong> Audio</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.3.</strong> GPIO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.4.</strong> UART/MIDI/RS-232</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.5.</strong> RTC</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.6.</strong> SD Card</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.7.</strong> Keyboard/Mouse</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.8.</strong> Ethernet</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.9.</strong> Wi-Fi</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.10.</strong> Bluetooth</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.11.</strong> USB</div></li></ol></li><li class="chapter-item expanded "><a href="hardware_baseboards.html"><strong aria-hidden="true">13.</strong> Baseboards</a></li><li class="chapter-item expanded affix "><li class="part-title">Neotron Systems</li><li class="chapter-item expanded "><a href="systems.html"><strong aria-hidden="true">14.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="neotron_32.html"><strong aria-hidden="true">15.</strong> Neotron 32</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="neotron_32_video.html"><strong aria-hidden="true">15.1.</strong> Video</a></li><li class="chapter-item expanded "><a href="neotron_32_audio.html"><strong aria-hidden="true">15.2.</strong> Audio</a></li><li class="chapter-item expanded "><a href="neotron_32_sdmmc.html"><strong aria-hidden="true">15.3.</strong> SD Card Slot</a></li><li class="chapter-item expanded "><a href="neotron_32_ps2.html"><strong aria-hidden="true">15.4.</strong> PS/2 and Joystick</a></li><li class="chapter-item expanded "><a href="neotron_32_wifi.html"><strong aria-hidden="true">15.5.</strong> WiFi</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.6.</strong> Expansion</div></li><li class="chapter-item expanded "><a href="neotron_32_parallel.html"><strong aria-hidden="true">15.7.</strong> Parallel Port</a></li><li class="chapter-item expanded "><a href="neotron_32_rs232.html"><strong aria-hidden="true">15.8.</strong> RS-232</a></li><li class="chapter-item expanded "><a href="neotron_32_midi.html"><strong aria-hidden="true">15.9.</strong> MIDI</a></li><li class="chapter-item expanded "><a href="neotron_32_usb.html"><strong aria-hidden="true">15.10.</strong> USB</a></li><li class="chapter-item expanded "><a href="neotron_32_rtc.html"><strong aria-hidden="true">15.11.</strong> RTC</a></li></ol></li><li class="chapter-item expanded "><a href="neotron_pico.html"><strong aria-hidden="true">16.</strong> Neotron Pico</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="neotron_pico_video.html"><strong aria-hidden="true">16.1.</strong> Video</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.2.</strong> Audio</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.3.</strong> SD Card Slot</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.4.</strong> PS/2</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.5.</strong> Expansion</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.6.</strong> USB</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.7.</strong> RTC</div></li></ol></li><li class="chapter-item expanded "><a href="neotron_340st.html"><strong aria-hidden="true">17.</strong> Neotron 340ST</a></li><li class="chapter-item expanded "><a href="neotron_500.html"><strong aria-hidden="true">18.</strong> Neotron 500</a></li><li class="chapter-item expanded "><a href="neotron_600.html"><strong aria-hidden="true">19.</strong> Neotron 600</a></li><li class="chapter-item expanded "><a href="neotron_1000.html"><strong aria-hidden="true">20.</strong> Neotron 1000</a></li><li class="chapter-item expanded "><a href="neotron_9x.html"><strong aria-hidden="true">21.</strong> Neotron 9X</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Neotron - The Embedded Rust Home Computer Platform</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-neotron-command-shell" id="the-neotron-command-shell">The Neotron Command Shell</a></h1>
<h2><a class="header" href="#introduction" id="introduction">Introduction</a></h2>
<p>The Neotron Shell is the first application started by the OS. It allows the user to give the system commands, including:</p>
<ul>
<li>Browsing filesystems on the SD card</li>
<li>Loading files from SD card into RAM</li>
<li>Inspecting the contents of RAM and ROM</li>
<li>Executing applications</li>
</ul>
<p>The Shell uses the standard OS API and hence is much like a normal application. The only difference is that it uses a special region of memory, allowing it to remaining running whilst it loads another application into the main program area. Once that application is started, it can use the shell's memory region as it's own - the OS will re-initialise the shell when the application exits.</p>
<p>Analogies from the PC world would include MS-DOS's <code>COMMAND.COM</code> and CP/M's CCP, but at a functional level it's more like the U-Boot Shell.</p>
<h2><a class="header" href="#shell-expansion" id="shell-expansion">Shell Expansion</a></h2>
<p>Any argument of the form <code>${VAR}</code> is replaced with the value stored in the environment variable called <code>VAR</code>.</p>
<p>Any argument containing a <code>*</code> character is taken to be a glob and is expanded to all the filenames matching that glob. Note that there are a limited number of arguments that can be given to a command, so attempts to glob more files than that number will generate an error.</p>
<h2><a class="header" href="#magic-devices" id="magic-devices">Magic Devices</a></h2>
<p>The OS supports a number of magic device filenames. The shell is unaware of this and just asks the OS to perform the specified operation on the given filenames.</p>
<h2><a class="header" href="#shell-commands" id="shell-commands">Shell Commands</a></h2>
<h3><a class="header" href="#dir-s-path" id="dir-s-path"><code>DIR [/S] [&lt;path&gt;]</code></a></h3>
<p>Performs a directory listing, either for the current drive and directory or of the given absolute or relative path.</p>
<p>The <code>/S</code> option displays directories recursively.</p>
<h3><a class="header" href="#mkdir-p-path" id="mkdir-p-path"><code>MKDIR [/P] &lt;path&gt;</code></a></h3>
<p>Creates a new directory, given either an absolute path or a relative path. Can
optionally make all the intermediate paths too.</p>
<h3><a class="header" href="#type-path" id="type-path"><code>TYPE &lt;path&gt;</code></a></h3>
<p>Displays the contents of a file, assuming it is ASCII text.</p>
<h3><a class="header" href="#hexdump-path" id="hexdump-path"><code>HEXDUMP &lt;path&gt;</code></a></h3>
<p>Displays the contents of a file as hex encoded binary.</p>
<h3><a class="header" href="#copy-s-source1-source2-dest" id="copy-s-source1-source2-dest"><code>COPY [/S] &lt;source1&gt; [&lt;source2&gt;...] &lt;dest&gt;</code></a></h3>
<p>Copies one or more files from one location to another. If one <code>sourceX</code> is
specified <code>dest</code> can be a file or a directory. If multiple <code>sourceX</code> files are
specified, <code>dest</code> must be a directory. The argument <code>/S</code> makes <code>COPY</code> look in
subdirectories recursively.</p>
<h3><a class="header" href="#rename-old-new" id="rename-old-new"><code>RENAME &lt;old&gt; &lt;new&gt;</code></a></h3>
<p>Changes the name of a file. Cannot move files between directories or drives.</p>
<h3><a class="header" href="#move-src-dest" id="move-src-dest"><code>MOVE &lt;src&gt; &lt;dest&gt;</code></a></h3>
<p>Moves a file from one directory to another. The <code>dest</code> path can be on a
different drive or in a different directory.</p>
<h3><a class="header" href="#del-path-path2" id="del-path-path2"><code>DEL &lt;path&gt; [&lt;path2&gt;...]</code></a></h3>
<p>Deletes one or more files.</p>
<h3><a class="header" href="#rmdir-path-path2" id="rmdir-path-path2"><code>RMDIR &lt;path&gt; [&lt;path2&gt;...]</code></a></h3>
<p>Deletes one or more empty directories.</p>
<h3><a class="header" href="#deltree-path-path2" id="deltree-path-path2"><code>DELTREE &lt;path&gt; [&lt;path2&gt;...]</code></a></h3>
<p>Recursively deletes one or more directories.</p>
<h3><a class="header" href="#peek-addr" id="peek-addr"><code>PEEK &lt;addr&gt;</code></a></h3>
<p>Displays the contents of ROM or RAM at the given address.</p>
<h3><a class="header" href="#poke-addr-value" id="poke-addr-value"><code>POKE &lt;addr&gt; &lt;value&gt;</code></a></h3>
<p>Writes a new value to RAM at the given address. Attempts to write to ROM are ignored.</p>
<h3><a class="header" href="#save-addr-length-file" id="save-addr-length-file"><code>SAVE &lt;addr&gt; &lt;length&gt; &lt;file&gt;</code></a></h3>
<p>Copies RAM or ROM to a file on disk.</p>
<h3><a class="header" href="#load-path" id="load-path"><code>LOAD &lt;path&gt;</code></a></h3>
<p>Copies the contents of a file on disk to RAM.</p>
<h3><a class="header" href="#exec-path" id="exec-path"><code>EXEC &lt;path&gt;</code></a></h3>
<p>Performs a LOAD of the given file, followed by a RUN. This command is implied if a command is given which matches the name of a file in the current directory, or in the system's <code>PATH</code> environment variable.</p>
<h3><a class="header" href="#run" id="run"><code>RUN</code></a></h3>
<p>Runs a program already in memory (e.g. having used <code>LOAD</code>)</p>
<h3><a class="header" href="#set-var-value" id="set-var-value"><code>SET &lt;var&gt; &lt;value&gt;</code></a></h3>
<p>Sets an environment variable to the given value. The value <code>var</code> should not include <code>${</code> or <code>}</code>.</p>
<pre><code class="language-console">$ SET PATH 0:/BIN;0:/OS/BIN
</code></pre>
<h3><a class="header" href="#echo-text" id="echo-text"><code>ECHO &lt;text&gt;</code></a></h3>
<p>Prints some text to the console.</p>
<pre><code class="language-console">$ ECHO &quot;Hello, world&quot;
</code></pre>
<h3><a class="header" href="#loadenv-path" id="loadenv-path"><code>LOADENV &lt;path&gt;</code></a></h3>
<p>Loads environment variables from a file.</p>
<pre><code class="language-console">$ LOADENV ./FILE.ENV
</code></pre>
<h3><a class="header" href="#saveenv-path" id="saveenv-path"><code>SAVEENV &lt;path&gt;</code></a></h3>
<p>Saves environment variables to a file.</p>
<pre><code class="language-console">$ SAVEENV ./FILE.ENV
</code></pre>
<h3><a class="header" href="#script-path" id="script-path"><code>SCRIPT &lt;path&gt;</code></a></h3>
<p>Runs the shell commands found in the given filename.</p>
<pre><code class="language-console">$ SCRIPT ./FILE.CMD
</code></pre>
<h3><a class="header" href="#edit-path" id="edit-path"><code>EDIT &lt;path&gt;</code></a></h3>
<p>Starts a full-screen text editor.</p>
<pre><code class="language-console">$ EDIT 1:/README.TXT
</code></pre>
<h3><a class="header" href="#dev" id="dev"><code>DEV</code></a></h3>
<p>Shows the list of devices reported by the BIOS.</p>
<h3><a class="header" href="#vol" id="vol"><code>VOL</code></a></h3>
<p>Shows the current list of volumes, by drive. Includes their volume names, format and storage capacity.</p>
<h3><a class="header" href="#scan" id="scan"><code>SCAN</code></a></h3>
<p>Re-scans the given device for volumes. Volumes which are no longer present (e.g. because the disk has been removed) are de-allocated their volume ID. New volumes are allocated new volume IDs.</p>
<h3><a class="header" href="#cd-dir" id="cd-dir"><code>CD [&lt;dir&gt;]</code></a></h3>
<p>Change the current directory. May include a volume ID, or be relative to the current volume, or the current directory. Unlike MS-DOS, there is only one current directory for the whole system (instead of one for each drive).</p>
<h3><a class="header" href="#attr-a-a--h-h--r-r--s-s--path" id="attr-a-a--h-h--r-r--s-s--path"><code>ATTR [/A] [/A-] [/H] [/H-] [/R] [/R-] [/S] [/S-] &lt;path&gt;</code></a></h3>
<p>Gets or sets a file's attributes (Archive, Hidden, Read Only, and System).</p>
<p>The <code>/X</code> flag sets a the relevant bit. The <code>/X-</code> flag unsets it.</p>
<pre><code class="language-console">$ # Set System, Hidden and Read Only, but clear Archive
$ ATTR /A- /S /H /R SYSTEM.DAT
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="software_os_apicalls.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="software_menu_shell.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="software_os_apicalls.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="software_menu_shell.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
